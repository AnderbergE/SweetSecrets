<!doctype html>
<html>
<head>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.0rc1/angular.js"></script>
	<script type="text/javascript">
		var app = angular.module('MyApp', []);

		function MyCtrl($scope) {
			$scope.r = 100;
			$scope.g = 100;
			$scope.b = 100;
			$scope.active = null;
			$scope.combo = document.querySelector(".combined-color");

			$scope.sliderActive = function (color) {
				if (color)
					$scope.active = color;
				else
					$scope.active = null;
			}

			$scope.sliderChange = function (event) {
				if ($scope.active) {
					var head = document.querySelector("." + $scope.active + " .slider-header");
					var pos = document.querySelector("." + $scope.active + " .slider-line").getBoundingClientRect();

					var x;
					if (event.x < pos.left)
						x = 0;
					else if (event.x > pos.right)
						x = 100;
					else
						x = Math.round(((event.x - pos.left) / pos.width)*100);
					
					head.style.left = x + "%";

					var c = 255 - Math.round(255*x/100);
					switch ($scope.active) {
						case "red":
							$scope.r = x;
							break;
						case "green":
							$scope.g = c;
							break;
						case "blue":
							$scope.b = c;
							break;
					}
				}
			}
		}

		
	</script>
	<style>
		html { height: 100%; margin: 0; }
		body { height: 96%; margin: 2%; }
		
		.container {
			background: beige;
			height: 65%;
			margin: auto;
			padding: 2%;
			width: 90%;
		}
		.slider {
			margin: 1% auto;
			height: 5rem;
			position: relative;
			width: 90%;
		}
		.slider-line {
			background: gray;
			border-radius: 1rem;
			height: 1rem;
			left: 0;
			position: absolute;
			top: 2rem;
			width: 100%;
		}
		.slider-header {
			cursor: move;
			left: 100%;
			position: absolute;
			top: 0;
		}
		.slider-header:after {
			background: inherit;
			border-radius: 50%;
			content: "";
			height: 5rem;
			left: -2.5rem;
			position: absolute;
			top: 0;
			width: 5rem;
		}
		
		.red .slider-header:after {
			box-shadow: 0 0 2px 1px red inset, 0 0 2px 1px red;
		}
		
		.green .slider-header:after {
			box-shadow: 0 0 2px 1px lime inset, 0 0 2px 1px lime;
		}
		
		.blue .slider-header:after {
			box-shadow: 0 0 2px 1px blue inset, 0 0 2px 1px blue;
		}

		.combined-color {
			border-radius: 50%;
			height: 5rem;
			margin: 3rem auto;
			width: 5rem;
		}
	</style>
</head>
<body ng-app="MyApp" ng-controller="MyCtrl" ng-mousemove="sliderChange($event)" ng-mouseup="sliderActive()">
	<div class="container">
		<div class="slider red" ng-mousedown="sliderActive('red')">
			<input type="number" ng-model="r">
			<div class="slider-line"></div>
			<div class="slider-header" ng-style="{'background': 'rgba(255, 0, 0, {{r}})'}"></div>
		</div>
		<div class="slider green" ng-mousedown="sliderActive('green')">
			<div class="slider-line"></div>
			<div class="slider-header" ng-style="{'background': 'rgb(255, {{g}}, 255)'}"></div>
		</div>
		<div class="slider blue" ng-mousedown="sliderActive('blue')">
			<div class="slider-line"></div>
			<div class="slider-header" ng-style="{'background': 'rgb(255, 255, {{b}})'}"></div>
		</div>
		<div class="combined-color" ng-style="{'background': 'rgb({{r}}, {{g}}, {{b}})'}">
		</div>
	</div>
</body>
</html>
